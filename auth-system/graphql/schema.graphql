# =====================
# GraphQL Types
# =====================

type Township {
  id: ID!
  name: String!
  wards: [Ward!]!
}

type Ward {
  id: ID!
  name: String!
  township_id: ID!
  township: Township
  created_at: String
  updated_at: String
}

type User {
  id: ID!
  name: String!
  email: String!
  township: Township
  ward: Ward
  two_factor_enabled: Boolean
  created_at: String
  updated_at: String
}

type Blog {
  id: ID!
  title: String!
  excerpt: String
  content: String!
  published_at: String
  created_at: String
  updated_at: String
  user: User            # ðŸ‘ˆ embed full user info (not just user_id)
}

type Technology {
    id: ID!
    name: String!
    slug: String
    icon: String
    created_at: String
    updated_at: String
}


type Status {
  id: ID!
  name: String
}

type Project {
  id: ID!
  title: String
  slug: String
  description: String
  status: Status
  start_date: String
  end_date: String
  is_featured: Boolean
  technologies: [Technology]
  created_at: String
  updated_at: String
}

type SkillCategory {
  id: ID!
  name: String!
  description: String
  created_at: String
  updated_at: String
}

type Skill {
  id: ID!
  name: String!
  level: Int!
  icon: String
  category: SkillCategory @belongsTo
  created_at: DateTime
  updated_at: DateTime
}

# =====================
# GraphQL Queries
# =====================

type Query {
  townships: [Township!]!
    @field(resolver: "App\\GraphQL\\Queries\\TownshipQuery@all")

  wards(township_id: ID!): [Ward!]!
    @field(resolver: "App\\GraphQL\\Queries\\WardQuery@byTownship")

  allWards: [Ward!]!
    @field(resolver: "App\\GraphQL\\Queries\\WardQuery@all")

  users: [User!]!
    @field(resolver: "App\\GraphQL\\Queries\\UserQuery@all")

  currentUser: User
    @field(resolver: "App\\GraphQL\\Queries\\UserQuery@current")

  blogs(limit: Int, search: String): [Blog!]!
    @field(resolver: "App\\GraphQL\\Queries\\BlogQuery@all")   # ðŸ‘ˆ match PHP

  blog(id: ID!): Blog
    @field(resolver: "App\\GraphQL\\Queries\\BlogQuery@find")  # ðŸ‘ˆ match PHP

  projects: [Project!]!
    @field(resolver: "App\\GraphQL\\Queries\\ProjectQuery@all")

  project(id: ID!): Project
    @field(resolver: "App\\GraphQL\\Queries\\ProjectQuery@find")

  skills: [Skill!]!
    @field(resolver: "App\\GraphQL\\Queries\\SkillQuery@all")

  skill(id: ID!): Skill
    @field(resolver: "App\\GraphQL\\Queries\\SkillQuery@find")
}
